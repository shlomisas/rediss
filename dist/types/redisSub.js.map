{"version":3,"sources":["types/redisSub.js"],"names":["RedisSub","subscribe","channel","cmd","isGlobString","_raw","unsubscribe","onMessage","callback","_client","on","message","decodeRedisData","pattern"],"mappings":";;;;;;AAIA;;;;AAEA;;;;;;2cANA;;;;AAQe,MAAMA,QAAN,6BAAgC;;AAErCC,aAAN,CAAgBC,OAAhB,EAAwB;AAAA;;AAAA;AACpB,gBAAIC,MAAM,sBAAYC,YAAZ,CAAyBF,OAAzB,IAAoC,YAApC,GAAmD,WAA7D;AACA,mBAAO,CAAC,EAAC,MAAM,MAAKG,IAAL,CAAUF,GAAV,EAAeD,OAAf,CAAP,CAAR;AAFoB;AAGvB;;AAEKI,eAAN,CAAkBJ,OAAlB,EAA0B;AAAA;;AAAA;AACtB,gBAAIC,MAAM,sBAAYC,YAAZ,CAAyBF,OAAzB,IAAoC,cAApC,GAAqD,aAA/D;AACA,mBAAO,CAAC,EAAC,MAAM,OAAKG,IAAL,CAAUF,GAAV,EAAeD,OAAf,CAAP,CAAR;AAFsB;AAGzB;;AAEDK,cAAUC,QAAV,EAAmB;AACf,aAAKC,OAAL,CAAaC,EAAb,CAAgB,SAAhB,EAA2B,CAACR,OAAD,EAAUS,OAAV,KAAsB;AAC7CH,qBAASN,OAAT,EAAkB,sBAAYU,eAAZ,CAA4BD,OAA5B,CAAlB;AACH,SAFD;;AAIA,aAAKF,OAAL,CAAaC,EAAb,CAAgB,UAAhB,EAA4B,CAACG,OAAD,EAAUX,OAAV,EAAmBS,OAAnB,KAA+B;AACvDH,qBAASN,OAAT,EAAkB,sBAAYU,eAAZ,CAA4BD,OAA5B,CAAlB,EAAwDE,OAAxD;AACH,SAFD;AAGH;AApB0C;kBAA1Bb,Q","file":"redisSub.js","sourcesContent":["/**\r\n * Created by Shlomi\r\n */\r\n\r\nimport RedisHelper from '../utils/redisHelper';\r\n\r\nimport RedisBase from './redisBase';\r\n\r\nexport default class RedisSub extends RedisBase{\r\n\r\n    async subscribe(channel){\r\n        let cmd = RedisHelper.isGlobString(channel) ? 'psubscribe' : 'subscribe';\r\n        return !!await this._raw(cmd, channel);\r\n    }\r\n\r\n    async unsubscribe(channel){\r\n        let cmd = RedisHelper.isGlobString(channel) ? 'punsubscribe' : 'unsubscribe';\r\n        return !!await this._raw(cmd, channel);\r\n    }\r\n\r\n    onMessage(callback){\r\n        this._client.on('message', (channel, message) => {\r\n            callback(channel, RedisHelper.decodeRedisData(message));\r\n        });\r\n\r\n        this._client.on('pmessage', (pattern, channel, message) => {\r\n            callback(channel, RedisHelper.decodeRedisData(message), pattern);\r\n        });\r\n    }\r\n}\r\n"]}